<div class="disaster-card">

<%# THIS IS THE MAP %>
<div style="width: 100%; height: 500px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
<%# THIS IS THE DISASTER INFO %>
  <h1><%= @disaster.name %></h1>
  <p><%= @disaster.description %></p>
  <p><strong>Location:</strong> <%= @disaster.location %></p>
  <p><strong>Intensity:</strong> <%= @disaster.intensity %></p>
  <p><strong>Price:</strong> $<%= @disaster.price %></p>
  <%# THIS IS THE INFO FOR REVIEWS %>
    <div class="reviews-list">
      <% @disaster.reviews.each do |review| %>
    <div class="reviews-list-item" >
    <p><%= review.comment %></p>
    <p><%= review.rating %></p>
    </div>
      <% end %>
    </div>

  <%# BOOKING POP UP FORM %>
  <div data-controller="toggle">
    <button data-action="click->toggle#fire" class="btn btn-primary">
      Book This Disaster
    </button>

    <div data-toggle-target="togglableElement" class="d-none">
      <div class="modal-overlay">
        <div class="modal-content">
          <h3>Book <%= @disaster.name %></h3>
          <%= simple_form_for [@disaster, @booking] do |f| %>
            <%= f.input :start_date,
                        as: :string,
                        input_html: { data: { controller: "datepicker" } } %>
            <%= f.input :end_date,
                        as: :string,
                        input_html: { data: { controller: "datepicker" } } %>
            <%= f.submit "Book Now", class: "btn btn-success" %>
            <button type="button" data-action="click->toggle#fire" class="btn btn-secondary">
              Cancel
            </button>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
